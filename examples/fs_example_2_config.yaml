# Copyright 2016  Anton Bragin, Victor Svekolkin
#
# This file is part of Projections.
#
# Projections is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# Projections is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with Projections.  If not, see <http://www.gnu.org/licenses/>.

# This prototype is for flat filesystem projection.
---
dialect: ObjectPath
resource_uri: None
driver_config_path: "drivers/driver_configurations/fs_config.yaml"

root_projection_uri: 'tests/test_dir'

bed_projection: &bed_projection
  type: file
  children: None
  name: " join([$.environment.name, $.name], '_') "
  uri: " $.children[@.type is 'file' and @.extension is '.bed'].resource_uri "

vcf_projection: &vcf_projection
  type: file
  children: None
  name: " join([$.environment.name, $.name], '_') "
  uri: " $.children[@.type is 'file' and @.extension is '.vcf'].resource_uri "

sample_dir_projection: &sample_dir_projection
  type: transparent
  children:
    vcf_projection: *vcf_projection
    bed_projection: *bed_projection
  name: " $.name "
  uri: " $.children[@.type is 'dir'].resource_uri "

root:
  type: directory
  children:
    sample_dir_projection: *sample_dir_projection
  name: " $.name "
  uri: " 'tests/test_dir' "